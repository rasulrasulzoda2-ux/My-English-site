<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <link rel="stylesheet" href="style.css">
  <title>Test: Comparative & Superlative Adjectives</title>
  <style>
    .test-instructions {
      background: var(--light-color);
      padding: 1.5rem;
      border-radius: var(--border-radius);
      margin-bottom: 1.5rem;
    }
  </style>
  <script src="https://www.gstatic.com/firebasejs/9.6.1/firebase-app-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/9.6.1/firebase-database-compat.js"></script>
</head>
<body>
  <header>
    <div class="header-content">
      <h1>Comparative & Superlative Test</h1>
      <p>Test your knowledge of adjective comparisons</p>
    </div>
  </header>

  <nav>
    <div class="nav-container">
      <input type="checkbox" id="mobile-menu-toggle" class="mobile-menu-toggle">
      <label for="mobile-menu-toggle" class="hamburger">
        <span></span>
        <span></span>
        <span></span>
      </label>
      <ul>
        <li><a href="index.html">Home</a></li>
        <li>
          <a href="rules.html">Grammar Rules</a>
          <ul>
            <li><a href="rule-present-simple.html">Present Simple</a></li>
            <li><a href="rule-present-continuous.html">Present Continuous</a></li>
            <li><a href="rule-past-simple.html">Past Simple</a></li>
            <li><a href="rule-future-simple.html">Future Simple</a></li>
            <li><a href="rule-articles.html">Articles</a></li>
          </ul>
        </li>
        <li>
          <a href="dictionary.html">Dictionary</a>
          <ul>
            <li><a href="verbs.html">Irregular Verbs</a></li>
            <li><a href="word-cards.html">Word Cards</a></li>
          </ul>
        </li>
        <li>
          <a href="tests.html">Tests</a>
          <ul>
            <li><a href="comperalative.html" class="nav-active">Comparative & Superlative</a></li>
            <li><a href="past-simple-test.html">Past Simple Test</a></li>
            <li><a href="present-simple-test.html">Present Simple Test</a></li>
            <li><a href="present-continuous-test.html">Present Continuous Test</a></li>
          </ul>
        </li>
      </ul>
    </div>
  </nav>

  <main>
    <section class="hero">
      <div class="hero-content">
        <h2>Comparative & Superlative Adjectives</h2>
        <p>Test your understanding of how to compare people, things, and ideas</p>
      </div>
    </section>

    <div class="test-instructions">
      <h3>Test Instructions</h3>
      <p>You have <strong>10 minutes</strong> to complete 20 questions. Choose the correct comparative or superlative form for each sentence. Good luck!</p>
    </div>

    <div class="intro" id="introSection">
      <div class="form-group">
        <label for="username">Your Name:</label>
        <input type="text" id="username" placeholder="Enter your name">
      </div>
      <button class="btn-primary" onclick="startTest()">Start Test</button>
    </div>

    <div id="timer" class="timer">Time left: 10:00</div>

    <form id="quizForm">
      <div id="questions"></div>
      <div class="actions">
        <button type="button" class="btn-primary" onclick="checkAnswers()">Check Answers</button>
      </div>
    </form>

    <div id="result" class="quiz-container" style="display: none;"></div>

    <section id="leaderboard" class="leaderboard">
      <h2>üèÜ Leaderboard</h2>
      <table>
        <thead>
          <tr>
            <th>Rank</th>
            <th>Name</th>
            <th>Score</th>
          </tr>
        </thead>
        <tbody id="scoreList"></tbody>
      </table>
    </section>
  </main>

  <footer>
    <div class="footer-content">
      <p>&copy; 2025 English Learning Platform. Created for my portfolio.</p>
    </div>
  </footer>

  <script>
    const firebaseConfig = {
      apiKey: "AIzaSyDolx1CGyygN_sbWphyHCcE-twTM1L_U5A",
      authDomain: "english-test-5454b.firebaseapp.com",
      databaseURL: "https://english-test-5454b-default-rtdb.asia-southeast1.firebasedatabase.app",
      projectId: "english-test-5454b",
      storageBucket: "english-test-5454b.appspot.com",
      messagingSenderId: "325979388906",
      appId: "1:325979388906:web:9dd9c3fec2330d97bad093",
      measurementId: "G-JL3WK4R83C"
    };
    firebase.initializeApp(firebaseConfig);
    const db = firebase.database();

    let countdown;
    let timeLeft = 600;

    const questions = [
      { 
        q: "My car is ______ than your car.", 
        options: { a: "fast", b: "faster", c: "fastest" }, 
        answer: "b", 
        explanation: "Comparative form is used when comparing two things: 'faster'." 
      },
      { 
        q: "This book is ______ than the last one.", 
        options: { a: "interesting", b: "more interesting", c: "most interesting" }, 
        answer: "b", 
        explanation: "Use 'more' with long adjectives." 
      },
      { 
        q: "That was the ______ day of my life.", 
        options: { a: "happy", b: "happier", c: "happiest" }, 
        answer: "c", 
        explanation: "Superlative form for three or more items: 'happiest'." 
      },
      { 
        q: "This problem is ______ than I thought.", 
        options: { a: "difficult", b: "more difficult", c: "most difficult" }, 
        answer: "b", 
        explanation: "Use 'more' with long adjectives." 
      },
      { 
        q: "The red dress is ______ than the blue one.", 
        options: { a: "beautiful", b: "more beautiful", c: "most beautiful" }, 
        answer: "b", 
        explanation: "'Beautiful' is a long adjective ‚Äî use 'more'." 
      },
      { 
        q: "She is the ______ girl in class.", 
        options: { a: "pretty", b: "prettier", c: "prettiest" }, 
        answer: "c", 
        explanation: "Superlative for 'pretty' is 'prettiest'." 
      },
      { 
        q: "My dad is ______ than your dad.", 
        options: { a: "tall", b: "taller", c: "tallest" }, 
        answer: "b", 
        explanation: "Comparative of 'tall' is 'taller'." 
      },
      { 
        q: "Summer is ______ than winter.", 
        options: { a: "warm", b: "warmer", c: "warmest" }, 
        answer: "b", 
        explanation: "Comparing two ‚Äî use 'warmer'." 
      },
      { 
        q: "This cake is ______ than the other one.", 
        options: { a: "delicious", b: "more delicious", c: "most delicious" }, 
        answer: "b", 
        explanation: "Use 'more' with long adjectives like 'delicious'." 
      },
      { 
        q: "He is the ______ player in the team.", 
        options: { a: "good", b: "better", c: "best" }, 
        answer: "c", 
        explanation: "Superlative of 'good' is 'best'." 
      },
      { 
        q: "This mountain is the ______ in the region.", 
        options: { a: "high", b: "higher", c: "highest" }, 
        answer: "c", 
        explanation: "Superlative form is used to compare more than two." 
      },
      { 
        q: "She runs ______ than her brother.", 
        options: { a: "fast", b: "faster", c: "fastest" }, 
        answer: "b", 
        explanation: "Comparative form for 'fast' is 'faster'." 
      },
      { 
        q: "That exam was ______ than the last one.", 
        options: { a: "hard", b: "harder", c: "hardest" }, 
        answer: "b", 
        explanation: "Comparative of 'hard' is 'harder'." 
      },
      { 
        q: "This is the ______ movie I have ever seen.", 
        options: { a: "funny", b: "funnier", c: "funniest" }, 
        answer: "c", 
        explanation: "Superlative form is 'funniest'." 
      },
      { 
        q: "My house is ______ than yours.", 
        options: { a: "big", b: "bigger", c: "biggest" }, 
        answer: "b", 
        explanation: "Comparative of 'big' is 'bigger'." 
      },
      { 
        q: "That test was the ______ of all.", 
        options: { a: "easy", b: "easier", c: "easiest" }, 
        answer: "c", 
        explanation: "Superlative of 'easy' is 'easiest'." 
      },
      { 
        q: "The giraffe is ______ than the horse.", 
        options: { a: "tall", b: "taller", c: "tallest" }, 
        answer: "b", 
        explanation: "Comparative of 'tall' is 'taller'." 
      },
      { 
        q: "This street is ______ than the last one.", 
        options: { a: "narrow", b: "narrower", c: "narrowest" }, 
        answer: "b", 
        explanation: "Comparative form is 'narrower'." 
      },
      { 
        q: "He is the ______ student in the class.", 
        options: { a: "smart", b: "smarter", c: "smartest" }, 
        answer: "c", 
        explanation: "Superlative of 'smart' is 'smartest'." 
      },
      { 
        q: "Today is ______ than yesterday.", 
        options: { a: "cold", b: "colder", c: "coldest" }, 
        answer: "b", 
        explanation: "Comparative form is 'colder'." 
      }
    ];

    function startTest() {
      const name = document.getElementById("username").value.trim();
      if (!name) {
        alert("Please enter your name before you start.");
        return;
      }
      document.getElementById("quizForm").style.display = "block";
      document.getElementById("timer").style.display = "block";
      document.getElementById("introSection").style.display = "none";
      renderQuestions();
      startTimer();
      updateLeaderboard();
    }

    function renderQuestions() {
      const container = document.getElementById("questions");
      container.innerHTML = "";
      questions.forEach((item, index) => {
        const optionHtml = Object.keys(item.options).map(letter =>
          `<label class="options"><input type="radio" name="q${index}" value="${letter}"> (${letter}) ${item.options[letter]}</label>`
        ).join("");
        container.insertAdjacentHTML("beforeend", `
          <div class="question">
            <p>${item.q}</p>
            <div class="options">${optionHtml}</div>
            <span id="f${index}" class="feedback"></span>
            <div id="e${index}" class="explanation"></div>
          </div>
        `);
      });
    }

    function startTimer() {
      const timerDisplay = document.getElementById("timer");
      timerDisplay.textContent = "Time left: " + formatTime(timeLeft);
      countdown = setInterval(() => {
        timeLeft--;
        timerDisplay.textContent = "Time left: " + formatTime(timeLeft);
        if (timeLeft <= 0) {
          clearInterval(countdown);
          timerDisplay.textContent = "‚è∞ Time is up!";
          checkAnswers();
        }
      }, 1000);
    }

    function formatTime(seconds) {
      const m = String(Math.floor(seconds / 60)).padStart(2, '0');
      const s = String(seconds % 60).padStart(2, '0');
      return `${m}:${s}`;
    }

    function checkAnswers() {
      let score = 0;
      questions.forEach((item, index) => {
        const radios = document.getElementsByName(`q${index}`);
        let selected = "";
        for (const r of radios) if (r.checked) selected = r.value;
        const feedback = document.getElementById(`f${index}`);
        const explanation = document.getElementById(`e${index}`);
        if (selected === item.answer) {
          feedback.textContent = "‚úîÔ∏è Correct";
          feedback.className = "feedback correct";
          explanation.textContent = "";
          score += 5;
        } else {
          feedback.textContent = "‚ùå Incorrect";
          feedback.className = "feedback incorrect";
          const correctLetter = item.answer.toUpperCase();
          const correctText = item.options[item.answer];
          explanation.textContent = `Correct answer: (${correctLetter}) ${correctText}. ${item.explanation}`;
        }
      });
      const username = document.getElementById("username").value.trim();
      const resultElement = document.getElementById("result");
      resultElement.style.display = "block";
      resultElement.innerHTML = `<h3>Your Score: ${score} / ${questions.length * 5}</h3>`;
      
      if (username) {
        db.ref("scores_comparative").push({ name: username, score });
      }
      
      updateLeaderboard();
      clearInterval(countdown);
    }

    function updateLeaderboard() {
      db.ref("scores_comparative").orderByChild("score").limitToLast(5).once("value", snapshot => {
        const list = document.getElementById("scoreList");
        list.innerHTML = "";
        const data = [];
        snapshot.forEach(child => data.push(child.val()));
        data.reverse().forEach((s, i) => {
          const row = document.createElement("tr");
          let rankClass = "";
          if (i === 0) rankClass = "medal-gold";
          else if (i === 1) rankClass = "medal-silver";
          else if (i === 2) rankClass = "medal-bronze";
          
          row.innerHTML = `<td class="${rankClass}">${i + 1}</td><td>${s.name}</td><td>${s.score}</td>`;
          list.appendChild(row);
        });
      });
    }

    // Initialize leaderboard
    updateLeaderboard();
  </script>
</body>
</html>